{"version":3,"sources":["webpack:///./src/views/RestaurantsTops.vue","webpack:///src/views/RestaurantsTops.vue","webpack:///./src/views/RestaurantsTops.vue?3981","webpack:///./src/views/RestaurantsTops.vue?3008"],"names":["render","_vm","this","_c","_self","staticClass","_v","_l","restaurants","restaurant","key","id","staticStyle","attrs","name","params","image","_s","FavoriteCount","description","isFavorited","on","$event","stopPropagation","preventDefault","deleteFavorite","addFavorite","staticRenderFns","components","NavTabs","data","created","methods","Toast","icon","title","restaurantId","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,WAAWA,EAAG,KAAK,CAACE,YAAY,QAAQ,CAACJ,EAAIK,GAAG,YAAYH,EAAG,MAAMF,EAAIM,GAAIN,EAAIO,aAAa,SAASC,GAAY,OAAON,EAAG,MAAM,CAACO,IAAID,EAAWE,GAAGN,YAAY,YAAYO,YAAY,CAAC,YAAY,QAAQ,OAAS,SAAS,CAACT,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,cAAc,CAACU,MAAM,CAAC,GAAK,CAACC,KAAM,aAAcC,OAAQ,CAACJ,GAAIF,EAAWE,OAAO,CAACR,EAAG,MAAM,CAACE,YAAY,WAAWQ,MAAM,CAAC,IAAMJ,EAAWO,YAAY,GAAGb,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,KAAK,CAACE,YAAY,cAAc,CAACJ,EAAIK,GAAG,IAAIL,EAAIgB,GAAGR,EAAWK,MAAM,OAAOX,EAAG,OAAO,CAACE,YAAY,yBAAyB,CAACJ,EAAIK,GAAG,OAAOL,EAAIgB,GAAGR,EAAWS,kBAAkBf,EAAG,IAAI,CAACE,YAAY,aAAa,CAACJ,EAAIK,GAAG,IAAIL,EAAIgB,GAAGR,EAAWU,aAAa,OAAOhB,EAAG,cAAc,CAACE,YAAY,uBAAuBQ,MAAM,CAAC,GAAK,CAACC,KAAM,aAAcC,OAAQ,CAACJ,GAAIF,EAAWE,OAAO,CAACV,EAAIK,GAAG,YAAaG,EAAWW,YAAajB,EAAG,SAAS,CAACE,YAAY,sBAAsBQ,MAAM,CAAC,KAAO,UAAUQ,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBvB,EAAIwB,eAAehB,EAAWE,OAAO,CAACV,EAAIK,GAAG,YAAYH,EAAG,SAAS,CAACE,YAAY,kBAAkBQ,MAAM,CAAC,KAAO,UAAUQ,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBvB,EAAIyB,YAAYjB,EAAWE,OAAO,CAACV,EAAIK,GAAG,aAAa,aAAY,IAEj9CqB,EAAkB,G,4DC4RP,GACfC,YACAC,gBAEAC,OACA,OACAtB,iBAGAuB,UACA,yBAEAC,SACA,yBACA,IACA,WAAAF,SAAA,gBAEA,+BACA,SACAG,aACAC,eACAC,2BAIA,qBACA,IACA,WAAAL,SAAA,oBAAAM,iBAEA,wBACA,2BAEA,yCACA,SACA,IACA,EACAhB,eACAF,iCAGA,GAGA,SACAe,aACAC,eACAC,yBAKA,wBACA,IACA,WAAAL,SAAA,uBAAAM,iBAEA,wBACA,2BAGA,yCACA,SACA,IACA,EACAhB,eACAF,iCAGA,GAEA,SACAe,aACAC,eACAC,2BCtWyV,I,YCOrVE,EAAY,eACd,EACArC,EACA2B,GACA,EACA,KACA,KACA,MAIa,aAAAU,E","file":"js/chunk-2d0d4396.3442b9f8.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container py-5\"},[_c('NavTabs'),_c('h1',{staticClass:\"mt-5\"},[_vm._v(\" 人氣餐廳 \")]),_c('hr'),_vm._l((_vm.restaurants),function(restaurant){return _c('div',{key:restaurant.id,staticClass:\"card mb-3\",staticStyle:{\"max-width\":\"540px\",\"margin\":\"auto\"}},[_c('div',{staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"col-md-4\"},[_c('router-link',{attrs:{\"to\":{name: 'restaurant', params: {id: restaurant.id}}}},[_c('img',{staticClass:\"card-img\",attrs:{\"src\":restaurant.image}})])],1),_c('div',{staticClass:\"col-md-8\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title\"},[_vm._v(\" \"+_vm._s(restaurant.name)+\" \")]),_c('span',{staticClass:\"badge badge-secondary\"},[_vm._v(\"收藏數：\"+_vm._s(restaurant.FavoriteCount))]),_c('p',{staticClass:\"card-text\"},[_vm._v(\" \"+_vm._s(restaurant.description)+\" \")]),_c('router-link',{staticClass:\"btn btn-primary mr-2\",attrs:{\"to\":{name: 'restaurant', params: {id: restaurant.id}}}},[_vm._v(\" Show \")]),(restaurant.isFavorited)?_c('button',{staticClass:\"btn btn-danger mr-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteFavorite(restaurant.id)}}},[_vm._v(\" 移除最愛 \")]):_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addFavorite(restaurant.id)}}},[_vm._v(\" 加到最愛 \")])],1)])])])})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container py-5\">\r\n    <NavTabs />\r\n    <h1 class=\"mt-5\">\r\n      人氣餐廳\r\n    </h1>\r\n\r\n    <hr>\r\n    <div\r\n      v-for=\"restaurant in restaurants\"\r\n      :key=\"restaurant.id\"\r\n      class=\"card mb-3\"\r\n      style=\"max-width: 540px;margin: auto;\"\r\n    >\r\n      <div class=\"row no-gutters\">\r\n        <div class=\"col-md-4\">\r\n          <router-link\r\n           :to=\"{name: 'restaurant', params: {id: restaurant.id}}\"\r\n          >\r\n            <img\r\n              class=\"card-img\"\r\n              :src=\"restaurant.image\"\r\n            >\r\n          </router-link>\r\n        </div>\r\n        <div class=\"col-md-8\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">\r\n              {{restaurant.name}}\r\n            </h5>\r\n            <span class=\"badge badge-secondary\">收藏數：{{restaurant.FavoriteCount}}</span>\r\n            <p class=\"card-text\">\r\n              {{restaurant.description}}\r\n            </p>\r\n            <router-link\r\n              :to=\"{name: 'restaurant', params: {id: restaurant.id}}\"\r\n              class=\"btn btn-primary mr-2\"\r\n            >\r\n              Show\r\n            </router-link>\r\n\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-danger mr-2\"\r\n              v-if=\"restaurant.isFavorited\"\r\n              @click.stop.prevent=\"deleteFavorite(restaurant.id)\"\r\n            >\r\n              移除最愛\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary\"\r\n              v-else\r\n              @click.stop.prevent=\"addFavorite(restaurant.id)\"\r\n            >\r\n              加到最愛\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavTabs from '../components/NavTabs.vue'\r\nimport restaurantsAPI from '../apis/restaurants'\r\nimport usersAPI from '../apis/users'\r\nimport {Toast} from '../utils/helpers'\r\n\r\n// const dummyData = {\r\n//     \"restaurants\": [\r\n//         {\r\n//             \"id\": 49,\r\n//             \"name\": \"Morris Keeling IV\",\r\n//             \"tel\": \"1-801-886-7642 x0828\",\r\n//             \"address\": \"92999 Bailey Garden\",\r\n//             \"opening_hours\": \"08:00\",\r\n//             \"description\": \"Cum vel corrupti et sit in.\\nVoluptas deserunt sapi\",\r\n//             \"image\": \"https://loremflickr.com/320/240/restaurant,food/?random=83.06286469813546\",\r\n//             \"viewCounts\": 0,\r\n//             \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"CategoryId\": 3,\r\n//             \"FavoritedUsers\": [\r\n//                 {\r\n//                     \"id\": 1,\r\n//                     \"name\": \"root\",\r\n//                     \"email\": \"root@example.com\",\r\n//                     \"password\": \"$2a$10$JzCoR9e6YxXVLJBcFq4h8O647zkUGnFedq2NNCaxt8zpbazKXexsq\",\r\n//                     \"isAdmin\": true,\r\n//                     \"image\": null,\r\n//                     \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"Favorite\": {\r\n//                         \"UserId\": 1,\r\n//                         \"RestaurantId\": 49,\r\n//                         \"createdAt\": \"2022-09-30T03:56:34.000Z\",\r\n//                         \"updatedAt\": \"2022-09-30T03:56:34.000Z\"\r\n//                     }\r\n//                 }\r\n//             ],\r\n//             \"isFavorited\": true,\r\n//             \"FavoriteCount\": 1\r\n//         },\r\n//         {\r\n//             \"id\": 48,\r\n//             \"name\": \"Justus Rogahn\",\r\n//             \"tel\": \"1-716-480-4341 x05162\",\r\n//             \"address\": \"3499 Rebecca Fords\",\r\n//             \"opening_hours\": \"08:00\",\r\n//             \"description\": \"non hic repudiandae\",\r\n//             \"image\": \"https://loremflickr.com/320/240/restaurant,food/?random=20.039416423145482\",\r\n//             \"viewCounts\": 0,\r\n//             \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"CategoryId\": 5,\r\n//             \"FavoritedUsers\": [\r\n//                 {\r\n//                     \"id\": 1,\r\n//                     \"name\": \"root\",\r\n//                     \"email\": \"root@example.com\",\r\n//                     \"password\": \"$2a$10$JzCoR9e6YxXVLJBcFq4h8O647zkUGnFedq2NNCaxt8zpbazKXexsq\",\r\n//                     \"isAdmin\": true,\r\n//                     \"image\": null,\r\n//                     \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"Favorite\": {\r\n//                         \"UserId\": 1,\r\n//                         \"RestaurantId\": 48,\r\n//                         \"createdAt\": \"2022-09-30T03:56:43.000Z\",\r\n//                         \"updatedAt\": \"2022-09-30T03:56:43.000Z\"\r\n//                     }\r\n//                 }\r\n//             ],\r\n//             \"isFavorited\": true,\r\n//             \"FavoriteCount\": 1\r\n//         },\r\n//         {\r\n//             \"id\": 1,\r\n//             \"name\": \"Alvis Morar12345453\",\r\n//             \"tel\": \"187.039.2451\",\r\n//             \"address\": \"935 Bartoletti Island\",\r\n//             \"opening_hours\": \"08:00\",\r\n//             \"description\": \"enim\",\r\n//             \"image\": \"https://loremflickr.com/320/240/restaurant,food/?random=13.649141450940473\",\r\n//             \"viewCounts\": 23,\r\n//             \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"updatedAt\": \"2022-11-03T14:24:10.000Z\",\r\n//             \"CategoryId\": 4,\r\n//             \"FavoritedUsers\": [\r\n//                 {\r\n//                     \"id\": 1,\r\n//                     \"name\": \"root\",\r\n//                     \"email\": \"root@example.com\",\r\n//                     \"password\": \"$2a$10$JzCoR9e6YxXVLJBcFq4h8O647zkUGnFedq2NNCaxt8zpbazKXexsq\",\r\n//                     \"isAdmin\": true,\r\n//                     \"image\": null,\r\n//                     \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"Favorite\": {\r\n//                         \"UserId\": 1,\r\n//                         \"RestaurantId\": 1,\r\n//                         \"createdAt\": \"2022-09-27T07:47:34.000Z\",\r\n//                         \"updatedAt\": \"2022-09-27T07:47:34.000Z\"\r\n//                     }\r\n//                 }\r\n//             ],\r\n//             \"isFavorited\": true,\r\n//             \"FavoriteCount\": 1\r\n//         },\r\n//         {\r\n//             \"id\": 60,\r\n//             \"name\": \"123\",\r\n//             \"tel\": \"123\",\r\n//             \"address\": \"123\",\r\n//             \"opening_hours\": \"20:59\",\r\n//             \"description\": \"123\",\r\n//             \"image\": \"https://i.imgur.com/b2mFJ8d.jpeg\",\r\n//             \"viewCounts\": 0,\r\n//             \"createdAt\": \"2022-09-30T13:00:00.000Z\",\r\n//             \"updatedAt\": \"2022-09-30T13:00:00.000Z\",\r\n//             \"CategoryId\": 2,\r\n//             \"FavoritedUsers\": [],\r\n//             \"isFavorited\": false,\r\n//             \"FavoriteCount\": 0\r\n//         },\r\n//         {\r\n//             \"id\": 59,\r\n//             \"name\": \"123\",\r\n//             \"tel\": \"123\",\r\n//             \"address\": \"123\",\r\n//             \"opening_hours\": \"20:59\",\r\n//             \"description\": \"123\",\r\n//             \"image\": \"https://i.imgur.com/ZPkIMlg.png\",\r\n//             \"viewCounts\": 0,\r\n//             \"createdAt\": \"2022-09-30T12:58:18.000Z\",\r\n//             \"updatedAt\": \"2022-09-30T12:58:18.000Z\",\r\n//             \"CategoryId\": 2,\r\n//             \"FavoritedUsers\": [],\r\n//             \"isFavorited\": false,\r\n//             \"FavoriteCount\": 0\r\n//         },\r\n//         {\r\n//             \"id\": 58,\r\n//             \"name\": \"name\",\r\n//             \"tel\": \"123\",\r\n//             \"address\": \"123\",\r\n//             \"opening_hours\": \"20:46\",\r\n//             \"description\": \"1234\",\r\n//             \"image\": \"https://i.imgur.com/m4BltCO.jpeg\",\r\n//             \"viewCounts\": 0,\r\n//             \"createdAt\": \"2022-09-30T12:44:30.000Z\",\r\n//             \"updatedAt\": \"2022-09-30T12:44:30.000Z\",\r\n//             \"CategoryId\": 3,\r\n//             \"FavoritedUsers\": [],\r\n//             \"isFavorited\": false,\r\n//             \"FavoriteCount\": 0\r\n//         },\r\n//         {\r\n//             \"id\": 57,\r\n//             \"name\": \"123\",\r\n//             \"tel\": \"123\",\r\n//             \"address\": \"123\",\r\n//             \"opening_hours\": \"20:43\",\r\n//             \"description\": \"1234\",\r\n//             \"image\": \"https://i.imgur.com/i503sbO.png\",\r\n//             \"viewCounts\": 0,\r\n//             \"createdAt\": \"2022-09-30T12:43:43.000Z\",\r\n//             \"updatedAt\": \"2022-09-30T12:43:43.000Z\",\r\n//             \"CategoryId\": 2,\r\n//             \"FavoritedUsers\": [],\r\n//             \"isFavorited\": false,\r\n//             \"FavoriteCount\": 0\r\n//         },\r\n//         {\r\n//             \"id\": 56,\r\n//             \"name\": \"123\",\r\n//             \"tel\": \"1234\",\r\n//             \"address\": \"1234\",\r\n//             \"opening_hours\": \"20:42\",\r\n//             \"description\": \"12345\",\r\n//             \"image\": \"https://i.imgur.com/GdrWnuk.jpeg\",\r\n//             \"viewCounts\": 0,\r\n//             \"createdAt\": \"2022-09-30T12:42:27.000Z\",\r\n//             \"updatedAt\": \"2022-09-30T12:42:27.000Z\",\r\n//             \"CategoryId\": 2,\r\n//             \"FavoritedUsers\": [],\r\n//             \"isFavorited\": false,\r\n//             \"FavoriteCount\": 0\r\n//         },\r\n//         {\r\n//             \"id\": 55,\r\n//             \"name\": \"123\",\r\n//             \"tel\": \"123\",\r\n//             \"address\": \"456\",\r\n//             \"opening_hours\": \"20:39\",\r\n//             \"description\": \"123\",\r\n//             \"image\": \"https://i.imgur.com/JF4oRjf.jpeg\",\r\n//             \"viewCounts\": 0,\r\n//             \"createdAt\": \"2022-09-30T12:40:48.000Z\",\r\n//             \"updatedAt\": \"2022-09-30T12:40:48.000Z\",\r\n//             \"CategoryId\": 3,\r\n//             \"FavoritedUsers\": [],\r\n//             \"isFavorited\": false,\r\n//             \"FavoriteCount\": 0\r\n//         },\r\n//         {\r\n//             \"id\": 54,\r\n//             \"name\": \"123\",\r\n//             \"tel\": \"123\",\r\n//             \"address\": \"456\",\r\n//             \"opening_hours\": \"20:39\",\r\n//             \"description\": \"123\",\r\n//             \"image\": \"https://i.imgur.com/BAzZ9oQ.jpeg\",\r\n//             \"viewCounts\": 0,\r\n//             \"createdAt\": \"2022-09-30T12:39:33.000Z\",\r\n//             \"updatedAt\": \"2022-09-30T12:39:33.000Z\",\r\n//             \"CategoryId\": 3,\r\n//             \"FavoritedUsers\": [],\r\n//             \"isFavorited\": false,\r\n//             \"FavoriteCount\": 0\r\n//         }\r\n//     ]\r\n// }\r\n\r\nexport default {\r\n  components: {\r\n    NavTabs\r\n  },\r\n  data () {\r\n    return {\r\n      restaurants: []\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchRestaurants()\r\n  },\r\n  methods: {\r\n    async fetchRestaurants() {\r\n      try {\r\n        const {data} = await restaurantsAPI.getTop()\r\n\r\n        this.restaurants = data.restaurants\r\n      } catch(error) {\r\n        Toast.fire({\r\n          icon: 'warning',\r\n          title: '無法取的人氣餐廳，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async addFavorite(restaurantId) {\r\n      try {\r\n        const {data} = await usersAPI.addFavorite({restaurantId})\r\n\r\n        if(data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n        this.restaurants = this.restaurants.map((restaurant) => {\r\n          if(restaurant.id === restaurantId) {\r\n            return {\r\n              ...restaurant,\r\n              isFavorited: true,\r\n              FavoriteCount: restaurant.FavoriteCount + 1\r\n            }\r\n          }\r\n          return restaurant\r\n        })\r\n\r\n      } catch(error) {\r\n        Toast.fire({\r\n          icon: 'warning',\r\n          title: '無法加入最愛，請稍後再試'\r\n        })\r\n      }\r\n      \r\n    },\r\n    async deleteFavorite(restaurantId) {\r\n      try {\r\n        const {data} = await usersAPI.deleteFavorite({restaurantId})\r\n\r\n        if(data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n\r\n        this.restaurants = this.restaurants.map((restaurant) => {\r\n          if(restaurant.id === restaurantId) {\r\n            return {\r\n              ...restaurant,\r\n              isFavorited: false,\r\n              FavoriteCount: restaurant.FavoriteCount - 1\r\n            }\r\n          }\r\n          return restaurant\r\n        })\r\n      } catch(error) {\r\n        Toast.fire({\r\n          icon: 'warning',\r\n          title: '無法移除最愛，請稍後再試'\r\n        })\r\n      }\r\n      \r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestaurantsTops.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestaurantsTops.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RestaurantsTops.vue?vue&type=template&id=635f6b88&\"\nimport script from \"./RestaurantsTops.vue?vue&type=script&lang=js&\"\nexport * from \"./RestaurantsTops.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}