{"version":3,"sources":["webpack:///./src/views/UsersTops.vue","webpack:///src/views/UsersTops.vue","webpack:///./src/views/UsersTops.vue?765a","webpack:///./src/views/UsersTops.vue?ff8b"],"names":["render","_vm","this","_c","_self","staticClass","_v","_l","users","user","key","id","attrs","name","params","image","_s","followerCount","isFollowed","on","$event","stopPropagation","preventDefault","unFollow","follow","staticRenderFns","components","NavTabs","data","created","methods","Toast","icon","title","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,WAAWA,EAAG,KAAK,CAACE,YAAY,QAAQ,CAACJ,EAAIK,GAAG,YAAYH,EAAG,MAAMA,EAAG,MAAM,CAACE,YAAY,mBAAmBJ,EAAIM,GAAIN,EAAIO,OAAO,SAASC,GAAM,OAAON,EAAG,MAAM,CAACO,IAAID,EAAKE,GAAGN,YAAY,SAAS,CAACF,EAAG,cAAc,CAACS,MAAM,CAAC,GAAK,CAACC,KAAM,OAAQC,OAAQ,CAACH,GAAIF,EAAKE,OAAO,CAACR,EAAG,MAAM,CAACS,MAAM,CAAC,IAAMH,EAAKM,MAAM,MAAQ,QAAQ,OAAS,aAAaZ,EAAG,KAAK,CAACF,EAAIK,GAAGL,EAAIe,GAAGP,EAAKI,SAASV,EAAG,OAAO,CAACE,YAAY,yBAAyB,CAACJ,EAAIK,GAAG,QAAQL,EAAIe,GAAGP,EAAKQ,kBAAkBd,EAAG,IAAI,CAACE,YAAY,QAAQ,CAAEI,EAAKS,WAAYf,EAAG,SAAS,CAACE,YAAY,iBAAiBO,MAAM,CAAC,KAAO,UAAUO,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBrB,EAAIsB,SAASd,EAAKE,OAAO,CAACV,EAAIK,GAAG,YAAYH,EAAG,SAAS,CAACE,YAAY,kBAAkBO,MAAM,CAAC,KAAO,UAAUO,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBrB,EAAIuB,OAAOf,EAAKE,OAAO,CAACV,EAAIK,GAAG,aAAa,MAAK,IAAI,IAEhgCmB,EAAkB,G,gDCiJP,GACfC,YACAC,gBAEAC,OACA,OACApB,WAGAqB,UACA,mBAEAC,SACA,mBACA,IACA,WAAAF,SAAA,qBACA,4BACAjB,QACAE,YACAE,cACAE,8BACAC,2BAEA,SACAa,aACAC,eACAC,6BAIA,gBACA,IACA,WAAAL,SAAA,iBAEA,wBACA,2BAGA,6BACA,SACA,IACA,EACAV,cACAD,iCAGA,GAEA,SACAc,aACAC,eACAC,uBAKA,kBACA,IACA,WAAAL,SAAA,mBAEA,wBACA,2BAGA,6BACA,SACA,IACA,EACAV,cACAD,iCAGA,GAEA,SACAc,aACAC,eACAC,2BChOmV,I,YCO/UC,EAAY,eACd,EACAlC,EACAyB,GACA,EACA,KACA,KACA,MAIa,aAAAS,E","file":"js/chunk-2d2214c3.8fadc972.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container py-5\"},[_c('NavTabs'),_c('h1',{staticClass:\"mt-5\"},[_vm._v(\" 美食達人 \")]),_c('hr'),_c('div',{staticClass:\"row text-center\"},_vm._l((_vm.users),function(user){return _c('div',{key:user.id,staticClass:\"col-3\"},[_c('router-link',{attrs:{\"to\":{name: 'user', params: {id: user.id}}}},[_c('img',{attrs:{\"src\":user.image,\"width\":\"140px\",\"height\":\"140px\"}})]),_c('h2',[_vm._v(_vm._s(user.name))]),_c('span',{staticClass:\"badge badge-secondary\"},[_vm._v(\"追蹤人數：\"+_vm._s(user.followerCount))]),_c('p',{staticClass:\"mt-3\"},[(user.isFollowed)?_c('button',{staticClass:\"btn btn-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.unFollow(user.id)}}},[_vm._v(\" 取消追蹤 \")]):_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.follow(user.id)}}},[_vm._v(\" 追蹤 \")])])],1)}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container py-5\">\r\n    <NavTabs />\r\n    <h1 class=\"mt-5\">\r\n      美食達人\r\n    </h1>\r\n    <hr>\r\n    <div class=\"row text-center\">\r\n      <div\r\n        class=\"col-3\"\r\n        v-for=\"user in users\"\r\n        :key=\"user.id\"\r\n      >\r\n        <router-link\r\n         :to=\"{name: 'user', params: {id: user.id}}\"\r\n        >\r\n          <img\r\n            :src=\"user.image\"\r\n            width=\"140px\"\r\n            height=\"140px\"\r\n          >\r\n        </router-link>\r\n        <h2>{{user.name}}</h2>\r\n        <span class=\"badge badge-secondary\">追蹤人數：{{user.followerCount}}</span>\r\n        <p class=\"mt-3\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-danger\"\r\n            v-if=\"user.isFollowed\"\r\n            @click.stop.prevent=\"unFollow(user.id)\"\r\n          >\r\n            取消追蹤\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            v-else\r\n            @click.stop.prevent=\"follow(user.id)\"\r\n          >\r\n            追蹤\r\n          </button>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavTabs from '../components/NavTabs.vue'\r\nimport usersAPI from '../apis/users'\r\nimport {Toast} from '../utils/helpers'\r\n\r\n// const dummyData = {\r\n//     \"users\": [\r\n//         {\r\n//             \"id\": 1,\r\n//             \"name\": \"root\",\r\n//             \"email\": \"root@example.com\",\r\n//             \"password\": \"$2a$10$JzCoR9e6YxXVLJBcFq4h8O647zkUGnFedq2NNCaxt8zpbazKXexsq\",\r\n//             \"isAdmin\": true,\r\n//             \"image\": null,\r\n//             \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"Followers\": [\r\n//                 {\r\n//                     \"id\": 1,\r\n//                     \"name\": \"root\",\r\n//                     \"email\": \"root@example.com\",\r\n//                     \"password\": \"$2a$10$JzCoR9e6YxXVLJBcFq4h8O647zkUGnFedq2NNCaxt8zpbazKXexsq\",\r\n//                     \"isAdmin\": true,\r\n//                     \"image\": null,\r\n//                     \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"Followship\": {\r\n//                         \"followerId\": 1,\r\n//                         \"followingId\": 1,\r\n//                         \"createdAt\": \"2022-09-27T17:20:13.000Z\",\r\n//                         \"updatedAt\": \"2022-09-27T17:20:13.000Z\"\r\n//                     }\r\n//                 }\r\n//             ],\r\n//             \"FollowerCount\": 1,\r\n//             \"isFollowed\": true\r\n//         },\r\n//         {\r\n//             \"id\": 2,\r\n//             \"name\": \"user1\",\r\n//             \"email\": \"user1@example.com\",\r\n//             \"password\": \"$2a$10$Yhw4LBOiXLc0RB1FsMpPn.q25kow7iGOIS8bm6Z9ezC13m1lmFmNe\",\r\n//             \"isAdmin\": false,\r\n//             \"image\": null,\r\n//             \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"Followers\": [\r\n//                 {\r\n//                     \"id\": 1,\r\n//                     \"name\": \"root\",\r\n//                     \"email\": \"root@example.com\",\r\n//                     \"password\": \"$2a$10$JzCoR9e6YxXVLJBcFq4h8O647zkUGnFedq2NNCaxt8zpbazKXexsq\",\r\n//                     \"isAdmin\": true,\r\n//                     \"image\": null,\r\n//                     \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"Followship\": {\r\n//                         \"followerId\": 1,\r\n//                         \"followingId\": 2,\r\n//                         \"createdAt\": \"2022-10-02T12:57:46.000Z\",\r\n//                         \"updatedAt\": \"2022-10-02T12:57:46.000Z\"\r\n//                     }\r\n//                 }\r\n//             ],\r\n//             \"FollowerCount\": 1,\r\n//             \"isFollowed\": true\r\n//         },\r\n//         {\r\n//             \"id\": 3,\r\n//             \"name\": \"user2\",\r\n//             \"email\": \"user2@example.com\",\r\n//             \"password\": \"$2a$10$osGy.XI0zm4ENnOrVMJkT.1Jp8lEvuTymeofuQH49uhkS/Ja275hC\",\r\n//             \"isAdmin\": false,\r\n//             \"image\": null,\r\n//             \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//             \"Followers\": [\r\n//                 {\r\n//                     \"id\": 1,\r\n//                     \"name\": \"root\",\r\n//                     \"email\": \"root@example.com\",\r\n//                     \"password\": \"$2a$10$JzCoR9e6YxXVLJBcFq4h8O647zkUGnFedq2NNCaxt8zpbazKXexsq\",\r\n//                     \"isAdmin\": true,\r\n//                     \"image\": null,\r\n//                     \"createdAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"updatedAt\": \"2022-09-14T15:10:59.000Z\",\r\n//                     \"Followship\": {\r\n//                         \"followerId\": 1,\r\n//                         \"followingId\": 3,\r\n//                         \"createdAt\": \"2022-09-27T17:36:33.000Z\",\r\n//                         \"updatedAt\": \"2022-09-27T17:36:33.000Z\"\r\n//                     }\r\n//                 }\r\n//             ],\r\n//             \"FollowerCount\": 1,\r\n//             \"isFollowed\": true\r\n//         }\r\n//     ]\r\n// }\r\n\r\nexport default {\r\n  components: {\r\n    NavTabs\r\n  },\r\n  data () {\r\n    return {\r\n      users: []\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchUsers()\r\n  },\r\n  methods: {\r\n    async fetchUsers() {\r\n      try {\r\n        const {data} = await usersAPI.getTopUsers()\r\n        this.users = data.users.map(user => ({\r\n          id: user.id,\r\n          name: user.name,\r\n          image: user.image,\r\n          followerCount: user.FollowerCount,\r\n          isFollowed: user.isFollowed\r\n        }))\r\n      } catch(error) {\r\n        Toast.fire({\r\n          icon: 'warning',\r\n          title: '無法取得美食達人資料，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async follow(userId) {\r\n      try {\r\n        const {data} = await usersAPI.follow(userId)\r\n\r\n        if(data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n\r\n        this.users = this.users.map((user) => {\r\n          if(user.id === userId) {\r\n            return {\r\n              ...user,\r\n              isFollowed: true,\r\n              followerCount: user.followerCount + 1\r\n            }\r\n          }\r\n          return user\r\n        })\r\n      } catch(error) {\r\n        Toast.fire({\r\n          icon: 'warning',\r\n          title: '無法追蹤，請稍後再試'\r\n        })\r\n      }\r\n      \r\n    },\r\n    async unFollow(userId) {  \r\n      try {\r\n        const {data} = await usersAPI.unfollow(userId)\r\n        \r\n        if(data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n\r\n        this.users = this.users.map((user) => {\r\n          if(user.id === userId) {\r\n            return {\r\n              ...user,\r\n              isFollowed: false,\r\n              followerCount: user.followerCount - 1\r\n            }\r\n          }\r\n          return user\r\n        })\r\n      } catch(error) {\r\n        Toast.fire({\r\n          icon: 'warning',\r\n          title: '無法取消追蹤，請稍後再試'\r\n        })\r\n      }\r\n      \r\n    }\r\n  },\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UsersTops.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UsersTops.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UsersTops.vue?vue&type=template&id=efeeb9c0&\"\nimport script from \"./UsersTops.vue?vue&type=script&lang=js&\"\nexport * from \"./UsersTops.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}